# Тестовое задание для компании yTip

## Необходимый софт для запуска

* php 8.2
* composer
* docker

## Запуск проекта
### Клонируем репозиторий

````
git clone https://github.com/TheAlchemistX/yTip.git
````

### Устанавливаем зависимости

````
composer install
````
### Создаём файл .env в корне, берём за основу файл .env.example. Не забываем в поле DB_HOST передать имя контейнера
````
DB_HOST=mysql
````

### Поднимаем контейнеры через sail

````
vendor/bin/sail up -d
````

### Запускаем миграции
````
vendor/bin/sail artisan migrate --seed
````
## Список выполненных заданий

### Обязательные 
1. Составить инструкцию по установке и настройке приложения.
2. Составить справку по всем методам в API (url, список параметров в запросе и
   ответе) или создать коллекцию запросов в программе Postman и
   экспортировать её в json-формате.
3. Реализовать метод для регистрации нового пользователя.
4. Реализовать метод для аутентификации пользователя.
5. Все методы, кроме регистрации и аутентификации, должны работать только
   для авторизованных пользователей.
6. Реализовать CRUD-действия (создание/чтение/редактирование/удаление) для
   одной модели и получение всех записей, относящихся к данной модели.
7. Реализовать валидацию полей при создании и редактировании записи.
8. Реализовать сортировку, пагинацию и фильтры для данной модели.
### Дополнительные *(уровень 2)*
1. Сделать возможность получения в ответе только тех атрибутов, которые
   указаны в запросе (например, ?fields=id,name).
2. Создать вторую модель и добавить связи &quot;one-to-many&quot; и &quot;many-to-many&quot;
   (методы в соответствующих моделях) ***Есть только one-to-many***.
3. Реализовать загрузку и привязку изображений для какой-либо записи.
4. Использовать сторонний фреймворк (например, Yii, ***Laravel***, Lumen, Symfony,
   Silex и др.).
5. Использовать менеджер зависимостей Composer для сторонних зависимостей,
   если они присутствуют в проекте.
6. Сделать создание таблиц в базе данных через миграции.
7. Сделать разные HTTP статус коды в ответах от API (400, 403, 405 и др.).
8. Загрузить приложение в репозиторий на Github.
### Дополнительные *(уровень 3)*
3. Использовать миграции или сидеры для наполнения таблиц в базе данных
   тестовыми данными.
## Справка по методам API

### 1. Запрос
```
POST api/user/reg
```


| Название | Тип    | Описание     |
|----------|--------|--------------|
| login    | string | Логин юзера  |
| password | string | Пароль юзера |
### Ответ
| Название   | Тип     | Описание              |
|------------|---------|-----------------------|
| login      | string  | Логин юзера           |
| updated_at | date    | Дата обновления юзера |
| created_at | date    | Дата создания юзера   |
| id         | integer | ID юзера              |

### 2. Запрос
```
POST api/user/auth
```
| Название | Тип    | Описание     |
|----------|--------|--------------|
| login    | string | Логин юзера  |
| password | string | Пароль юзера |
### Ответ
 **true/false**
### 3. Запрос
````
POST api/user/addImage
````
| Название | Тип    | Описание      |
|----------|--------|---------------|
| image    | string | Файл картинки |
### Ответ
| Название | Тип    | Описание                    |
|----------|--------|-----------------------------|
| image    | string | путь до картинки на сервере |
### 4. Запрос
````
POST /api/posts/create
````
| Название | Тип    | Описание        |
|----------|--------|-----------------|
| title    | string | Заголовок поста |
| content  | text   | Контент поста   |
**Хочу обратить внимание на валидацию поля content в min:24 символа**
### Ответ
| Название    | Тип      | Описание              |
|-------------|----------|-----------------------|
| title       | string   | Заголовок поста       |
| content     | text     | Контент поста         |
| user_id     | integer  | ID юзера              |
| updated_at  | date     | Дата обновления поста |
| created_at  | date     | Дата создания поста   |
| id          | integer  | ID поста              |

### 5. Запрос
````
POST /api/posts/update/{post_id}
````
| Название | Тип    | Описание        |
|----------|--------|-----------------|
| title    | string | Заголовок поста |
| content  | text   | Контент поста   |
### Ответ
**true/false**
### 6. Запрос
````
DELETE /api/posts/destroy/{post_id}
````
### Ответ
**true/false**
### 7. Запрос
````
GET /api/posts/read
````
### Ответ
| Название    | Тип      | Описание              |
|-------------|----------|-----------------------|
| id          | integer  | ID поста              |
| title       | string   | Заголовок поста       |
| content     | text     | Контент поста         |
| user_id     | integer  | ID юзера              |
| created_at  | date     | Дата создания поста   |
| updated_at  | date     | Дата обновления поста |

### 8. Запрос
````
GET /api/posts/read/sort
````
#### get параметры - 
````
desc/asc = id/title/content/user_id/updated_at/created_at
````
#### Пример -
````
http://localhost/api/posts/read/sort?asc=created_at
````
### Ответ
| Название    | Тип      | Описание              |
|-------------|----------|-----------------------|
| id          | integer  | ID поста              |
| title       | string   | Заголовок поста       |
| content     | text     | Контент поста         |
| user_id     | integer  | ID юзера              |
| created_at  | date     | Дата создания поста   |
| updated_at  | date     | Дата обновления поста |

### 9. Запрос
````
GET /api/posts/read/filter
````
#### get параметры -
````
id/title/content/user_id/updated_at/created_at = значение
````
#### Пример -
````
http://localhost/api/posts/read/filter?id=1
````
### Ответ
| Название    | Тип      | Описание              |
|-------------|----------|-----------------------|
| id          | integer  | ID поста              |
| title       | string   | Заголовок поста       |
| content     | text     | Контент поста         |
| user_id     | integer  | ID юзера              |
| created_at  | date     | Дата создания поста   |
| updated_at  | date     | Дата обновления поста |
### 10. Запрос
````
GET /api/posts/read/get
````
#### get параметры -
````
fields=id,title,content,user_id,updated_at,created_at
````
#### Пример -
````
http://localhost/api/posts/read/get?fields=id,title
````
### Ответ
**В зависимости от переданных параметров**
## Может быть полезно при тестировании -
### 11. Запрос
````
GET /api/user/logout
````
### Ответ
**true/false**
### 12. Запрос
````
GET /api/posts/read/{post_id}/get
````
### Ответ
| Название    | Тип      | Описание              |
|-------------|----------|-----------------------|
| id          | integer  | ID поста              |
| title       | string   | Заголовок поста       |
| content     | text     | Контент поста         |
| user_id     | integer  | ID юзера              |
| created_at  | date     | Дата создания поста   |
| updated_at  | date     | Дата обновления поста |
